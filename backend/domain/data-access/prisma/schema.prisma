generator client {
  provider = "prisma-client-js"
}

datasource db {
  provider = "postgresql"
  url      = env("DATABASE_URL")
}

model User {
  userid   Int      @id @default(autoincrement())
  name     String
  telNr    String
  mail     String
  password String
  role     String   @default("CUSTOMER")
  orders   Order[]
  events   Events[] @relation("User_Events")
}

model Cocktail {
  cocktailid    Int             @id @default(autoincrement())
  name          String
  ingredients   String
  description   String
  price         Int
  cocktailOrder CocktailOrder[]
}

model Order {
  orderid       Int             @id @default(autoincrement())
  userID        Int
  deliveryDate  DateTime
  users         User            @relation(fields: [userID], references: [userid])
  cocktailOrder CocktailOrder[]
}

model Events {
  eventid     Int    @id @default(autoincrement())
  name        String
  address     String
  date        String
  duration    String
  maxUsers    Int
  description String
  users       User[] @relation("User_Events")
}

model CocktailOrder {
  cocktailid Int
  cocktail   Cocktail @relation(fields: [cocktailid], references: [cocktailid])
  orderid    Int
  order      Order    @relation(fields: [orderid], references: [orderid])
  createdAt  DateTime @default(now())
  amount     Int

  @@id([cocktailid, orderid])
}
